{"version":3,"sources":["../../src/pages/my-team/my-team.module.ts","../../src/pages/my-team/my-team.ts"],"names":[],"mappings":"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","file":"13.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MyTeamPage } from './my-team';\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    MyTeamPage\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(MyTeamPage)\n  ],\n  exports: [\n    MyTeamPage\n  ]\n})\nexport class MyTeamPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-team/my-team.module.ts","import { Component } from '@angular/core';\nimport {\n  IonicPage, NavController, NavParams, AlertController,\n  ModalController, ActionSheetController\n} from 'ionic-angular';\nimport { StartTeamPage } from '../start-team/start-team';\nimport { AngularFireDatabase, FirebaseObjectObservable } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { MyTeamDB } from '../../helpers/myTeamDB'\nimport * as moment from 'moment';\n\n/**\n * Generated class for the MyTeamPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-my-team',\n  templateUrl: 'my-team.html',\n})\nexport class MyTeamPage {\n  myTeams: any[] = []\n  myTeamsSub: any\n  currentLength: number = 0\n  hasNoTeams: boolean = false\n  matches: any[] = [];\n  months: any[] = [];\n\n  constructor(private modal: ModalController,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private db: AngularFireDatabase,\n    private afAuth: AngularFireAuth,\n    private teamDB: MyTeamDB,\n    private actionSheetCtrl: ActionSheetController,\n    private alertCtrl: AlertController) {\n  }\n\n  ionViewDidLoad() {\n    this.loadTeams();\n    this.loadGames()\n  }\n\n  loadTeams() {\n    this.myTeamsSub = this.db.list('users/' + this.afAuth.auth.currentUser.uid\n      + '/myTeams').subscribe(data => {\n        if (data.length == 0) this.hasNoTeams = true;\n        this.hasNoTeams = false;\n        this.myTeams = []\n        this.myTeams = data;\n      })\n  }\n\n  loadGames() {\n    this.matches = []\n    this.db.list('users/' + this.afAuth.auth.currentUser.uid + '/myTeams/').take(1)\n      .subscribe(teams => {\n        teams.forEach(team => {\n          this.db.list('teams/' + team.$key + '/upcomingMatches/').take(1).subscribe(matches => {\n            matches.forEach(match => {\n              const monthNum = match.date.substring(0, 2);\n              const monthName = moment(monthNum, 'MM').format('MMMM');\n              const index = this.months.map(e => { return e.num }).indexOf(monthNum);\n              if (index == -1) this.months.push({ name: monthName, num: monthNum })\n              const matchIndex = this.matches.map(e => { return e.$key }).indexOf(match.$key);\n              if (matchIndex == -1) this.matches.push(match)\n            });\n          })\n        });\n      })\n  }\n\n  doRefresh(refresher) {\n    this.loadGames();\n    this.loadTeams();\n    setTimeout(() => {\n      refresher.complete();\n    }, 1000);\n  }\n\n  startTeam() {\n    const myModal = this.modal.create('StartTeamPage');\n    myModal.present();\n  }\n\n  openMatchRequest(request) {\n    this.navCtrl.push('MatchPage', { request: request })\n  }\n\n  ionViewWillLeave() {\n    this.myTeamsSub.unsubscribe();\n    this.teamDB.unsubscribeAll();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-team/my-team.ts"],"sourceRoot":""}