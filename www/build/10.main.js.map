{"version":3,"sources":["../../src/pages/post/post.module.ts","../../src/pages/post/post.ts"],"names":[],"mappings":"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","file":"10.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PostPage } from './post';\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    PostPage,\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(PostPage),\n  ],\n  exports: [\n    PostPage\n  ]\n})\nexport class PostPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/post/post.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ActionSheetController } from 'ionic-angular';\nimport { MyTeamDB } from '../../helpers/myTeamDB';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\nimport * as moment from 'moment';\n\n/**\n * Generated class for the PostPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-post',\n  templateUrl: 'post.html',\n})\nexport class PostPage {\n  post: any\n  authorInfo: any = {}\n  comment: string = '';\n  comments: FirebaseListObservable<any[]>;\n  currentUserID: any\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private teamDB: MyTeamDB,\n    private afAuth: AngularFireAuth,\n    private db: AngularFireDatabase,\n    private actionSheetCtrl: ActionSheetController) {\n    this.post = this.navParams.get('post');\n    this.currentUserID = this.afAuth.auth.currentUser.uid;\n  }\n\n  ionViewDidLoad() {\n    this.teamDB.getUserInfo(this.post.by).then(data => {\n      this.authorInfo = data;\n    })\n    this.comments = this.db.list('timeline/' + this.post.$key + '/comments', {\n      query: {\n        orderByChild: 'timestamp'\n      }\n    });\n  }\n\n  sendComment() {\n    let time = moment().format(\"HH:mm:ss\");\n    let date = moment().format(\"L\");\n    this.db.list('timeline/' + this.post.$key + '/comments').push({\n      by: this.afAuth.auth.currentUser.uid,\n      message: this.comment,\n      date: date,\n      time: time,\n      timestamp: new Date().getTime()\n    }).then(() => {\n      this.comment = '';\n      // Refresh comment\n    })\n  }\n\n  deleteComment(comment) {\n    this.db.object('timeline/' + this.post.$key + '/comments/' + comment.$key).remove();\n  }\n\n  options() {\n    let actionSheet;\n    let btns;\n    if (this.post.by == this.afAuth.auth.currentUser.uid) {\n      btns = [\n        {\n          text: 'حذف',\n          role: 'destructive',\n          handler: () => {\n            this.db.object('timeline/' + this.post.$key).remove();\n            this.navCtrl.pop();\n          }\n        },\n        {\n          text: 'Report',\n          role: 'destructive',\n          handler: () => {\n            this.db.list('reports/').push(this.post)\n          }\n        },\n        {\n          text: 'إلغاء',\n          role: 'cancel',\n          handler: () => {\n          }\n        }\n      ]\n    } else {\n      btns = [\n        {\n          text: 'إلغاء',\n          role: 'cancel',\n          handler: () => {\n          }\n        }\n      ]\n    }\n    actionSheet = this.actionSheetCtrl.create({\n      buttons: btns\n    })\n    actionSheet.present()\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/post/post.ts"],"sourceRoot":""}