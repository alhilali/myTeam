{"version":3,"sources":["../../src/pages/player/player.module.ts","../../src/pages/player/player.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACV;AAC+B;AAcrE,IAAa,gBAAgB;IAA7B;IAA+B,CAAC;IAAD,uBAAC;AAAD,CAAC;AAAnB,gBAAgB;IAZ5B,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,2DAAU;SACX;QACD,OAAO,EAAE;YACP,uFAAgB;YAChB,sEAAe,CAAC,QAAQ,CAAC,2DAAU,CAAC;SACrC;QACD,OAAO,EAAE;YACP,2DAAU;SACX;KACF,CAAC;GACW,gBAAgB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBuB;AACe;AAI5C;AAEqC;AACR;AAEpD;;;;;GAKG;AAQH,IAAa,UAAU;IAQrB,oBAAmB,OAAsB,EAChC,SAAoB,EACnB,MAAuB,EACvB,EAAuB,EACxB,MAAgB,EACf,QAAyB,EACzB,eAAsC;QAN7B,YAAO,GAAP,OAAO,CAAe;QAChC,cAAS,GAAT,SAAS,CAAW;QACnB,WAAM,GAAN,MAAM,CAAiB;QACvB,OAAE,GAAF,EAAE,CAAqB;QACxB,WAAM,GAAN,MAAM,CAAU;QACf,aAAQ,GAAR,QAAQ,CAAiB;QACzB,oBAAe,GAAf,eAAe,CAAuB;QAbhD,WAAM,GAAG,EAAU;QACnB,YAAO,GAAU,EAAE;QACnB,YAAO,GAAW,GAAG,CAAC;QAYpB,IAAI,CAAC,MAAM,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC;QAChD,IAAI,CAAC,MAAM,CAAC,EAAE,GAAG,EAAE,CAAC;IACtB,CAAC;IAEK,oCAAe,GAArB;;;;;4BACE,qBAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,cAAI;4BAC5C,EAAE,CAAC,CAAC,IAAI,CAAC;gCAAC,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC;wBACvC,CAAC,CAAC;;wBAFF,SAEE;;;;;KACH;IAED,oCAAe,GAAf;QACE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;QAC7C,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAEK,mCAAc,GAApB;;;gBACM,QAAQ;;;4BACZ,qBAAM,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,cAAI;4BACvD,QAAQ,GAAG,IAAI,CAAC;4BAChB,KAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;4BACvB,EAAE,CAAC,CAAC,CAAC,KAAI,CAAC,MAAM,CAAC,EAAE,CAAC;gCAAC,KAAI,CAAC,MAAM,CAAC,EAAE,GAAG,yFAAyF,CAAC;wBAClI,CAAC,CAAC;;wBAJF,SAIE;wBACF,IAAI,CAAC,WAAW,EAAE,CAAC;;;;;KACpB;IAEK,gCAAW,GAAjB;;;;gBACE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI;sBACpC,UAAU,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,cAAI;oBAClC,KAAI,CAAC,OAAO,GAAG,EAAE;oBACjB,IAAI,CAAC,CAAC;oBACN,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;wBACjC,KAAI,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,cAAI;4BAC9D,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;wBACzB,CAAC,CAAC;oBACJ,CAAC;gBACH,CAAC,CAAC;;;;KACL;IAED,mCAAc,GAAd,UAAe,KAAK;QAClB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACpC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QAC5C,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAED,iCAAY,GAAZ;QACE,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,CAAC;QACtD,IAAI,CAAC,OAAO,GAAG,YAAY,GAAG,EAAE,CAAC;IACnC,CAAC;IAED,8BAAS,GAAT;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,qBAAqB,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QACjF,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,4BAAO,GAAP;QAAA,iBAgDC;QA/CC,IAAI,WAAW,CAAC;QAChB,IAAI,IAAI,CAAC;QACT,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;YACxC,IAAI,GAAG;gBACL;oBACE,IAAI,EAAE,cAAc;oBACpB,OAAO,EAAE;wBACP,KAAI,CAAC,SAAS,EAAE,CAAC;oBACnB,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,OAAO;oBACb,IAAI,EAAE,aAAa;oBACnB,OAAO,EAAE;wBACP,KAAI,CAAC,EAAE,CAAC,MAAM,CAAC,QAAQ,GAAG,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG;4BACxD,WAAW,GAAG,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC;6BAC9B,GAAG,CAAC,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC;wBAC7B,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;oBACrB,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,OAAO;oBACb,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;oBACT,CAAC;iBACF;aACF;QACH,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,GAAG;gBACL;oBACE,IAAI,EAAE,eAAe;oBACrB,OAAO,EAAE;wBACP,KAAI,CAAC,eAAe,EAAE,CAAC;oBACzB,CAAC;iBACF;gBACD;oBACE,IAAI,EAAE,OAAO;oBACb,IAAI,EAAE,QAAQ;oBACd,OAAO,EAAE;oBACT,CAAC;iBACF;aACF;QACH,CAAC;QACD,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;YACxC,OAAO,EAAE,IAAI;SACd,CAAC;QACF,WAAW,CAAC,OAAO,EAAE;IACvB,CAAC;IAED,oCAAe,GAAf;QACE,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,iBAAiB,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;QAC7E,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,6BAAQ,GAAR,UAAS,IAAI;QACX,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;IAClD,CAAC;IAEH,iBAAC;AAAD,CAAC;AA5HuB;IAArB,6EAAY,CAAC,6DAAM,CAAC;kDAAS,gEAAS,oBAAT,gEAAS;0CAAS;AAJrC,UAAU;IAPtB,wEAAS,CAAC;QACT,OAAO,EAAE,kBAAkB;KAC5B,CAAC;IACD,wEAAS,CAAC;QACT,QAAQ,EAAE,aAAa;OACG;KAC3B,CAAC;eAegD;AAkHjD;SAhIY,UAAU","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PlayerPage } from './player';\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    PlayerPage\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(PlayerPage),\n  ],\n  exports: [\n    PlayerPage\n  ]\n})\nexport class PlayerPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/player/player.module.ts","import { MyTeamDB } from \"./../../helpers/myTeamDB\";\nimport { Component, ViewChildren, QueryList } from '@angular/core';\nimport {\n  IonicPage, NavController, ActionSheetController,\n  NavParams, ModalController, Slides, Content\n} from 'ionic-angular';\nimport { User } from '../../models/user';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\n\n/**\n * Generated class for the PlayerPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage({\n  segment: 'player/:username'\n})\n@Component({\n  selector: 'page-player',\n  templateUrl: 'player.html',\n})\nexport class PlayerPage {\n  player = {} as User\n  myTeams: any[] = []\n  section: string = '0';\n  @ViewChildren(Slides) slides: QueryList<Slides>;\n  bottomSlides: Slides\n  currentUID: any\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private afAuth: AngularFireAuth,\n    private db: AngularFireDatabase,\n    public teamDB: MyTeamDB,\n    private modlCtrl: ModalController,\n    private actionSheetCtrl: ActionSheetController) {\n    this.player.username = navParams.get('username')\n    this.player.bg = '';\n  }\n\n  async ionViewWillLoad() {\n    await this.afAuth.auth.onAuthStateChanged(user => {\n      if (user) this.currentUID = user.uid;\n    })\n  }\n\n  ngAfterViewInit() {\n    this.bottomSlides = this.slides.toArray()[1];\n    this.bottomSlides.lockSwipes(true);\n  }\n\n  async ionViewDidLoad() {\n    let userInfo;\n    await this.teamDB.findUID(this.player.username).then(data => {\n      userInfo = data;\n      this.player = userInfo;\n      if (!this.player.bg) this.player.bg = 'http://www.publicdomainpictures.net/pictures/50000/nahled/sunset-profile-background.jpg';\n    })\n    this.loadMyTeams();\n  }\n\n  async loadMyTeams() {\n    this.db.list('users/' + this.player.$key\n      + '/myTeams').take(1).subscribe(data => {\n        this.myTeams = []\n        let i;\n        for (i = 0; i < data.length; i++) {\n          this.db.object('teams/' + data[i].teamId).take(1).subscribe(team => {\n            this.myTeams.push(team)\n          })\n        }\n      })\n  }\n\n  segmentChanged(event) {\n    this.bottomSlides.lockSwipes(false);\n    this.bottomSlides.slideTo(event.value, 500);\n    this.bottomSlides.lockSwipes(true);\n  }\n\n  slideChanged() {\n    let currentIndex = this.bottomSlides.getActiveIndex();\n    this.section = currentIndex + '';\n  }\n\n  addPlayer() {\n    let modal = this.modlCtrl.create('AddPlayerToTeamPage', { player: this.player });\n    modal.present();\n  }\n\n  options() {\n    let actionSheet;\n    let btns;\n    if (this.currentUID != this.player.$key) {\n      btns = [\n        {\n          text: 'إضافة اللاعب',\n          handler: () => {\n            this.addPlayer();\n          }\n        },\n        {\n          text: 'Block',\n          role: 'destructive',\n          handler: () => {\n            this.db.object('users/' + this.afAuth.auth.currentUser.uid +\n              '/blocked/' + this.player.$key)\n              .set({ status: 'blocked' })\n            this.navCtrl.pop();\n          }\n        },\n        {\n          text: 'إلغاء',\n          role: 'cancel',\n          handler: () => {\n          }\n        }\n      ]\n    } else {\n      btns = [\n        {\n          text: 'تعديل بياناتي',\n          handler: () => {\n            this.editProfilePage();\n          }\n        },\n        {\n          text: 'إلغاء',\n          role: 'cancel',\n          handler: () => {\n          }\n        }\n      ]\n    }\n    actionSheet = this.actionSheetCtrl.create({\n      buttons: btns\n    })\n    actionSheet.present()\n  }\n\n  editProfilePage() {\n    let modal = this.modlCtrl.create('EditProfilePage', { player: this.player });\n    modal.present();\n  }\n\n  openTeam(team) {\n    this.navCtrl.push('TeamPage', { id: team.$key })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/player/player.ts"],"sourceRoot":""}