{"version":3,"sources":["../../src/pages/notification/notification.module.ts","../../src/pages/notification/notification.ts","../../src/pipes/pipes.module.ts","../../src/pipes/reverse/reverse.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { NotificationPage } from './notification';\nimport { ComponentsModule } from '../../components/components.module'\nimport { PipesModule } from \"./../../pipes/pipes.module\";\n\n@NgModule({\n  declarations: [\n    NotificationPage,\n  ],\n  imports: [\n    ComponentsModule,\n    PipesModule,\n    IonicPageModule.forChild(NotificationPage),\n  ],\n  exports: [\n    NotificationPage\n  ]\n})\nexport class NotificationPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notification/notification.module.ts","import { MyTeamDB } from \"./../../helpers/myTeamDB\";\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { Events } from 'ionic-angular';\nimport * as moment from 'moment';\n\n/**\n * Generated class for the NotificationPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-notification',\n  templateUrl: 'notification.html',\n})\nexport class NotificationPage {\n\n  requests: FirebaseListObservable<any[]>\n  userNotification: FirebaseListObservable<any[]>;\n  currentUserUid: any\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private db: AngularFireDatabase,\n    private afAuth: AngularFireAuth,\n    public events: Events,\n    private modlCtrl: ModalController,\n    private teamDB: MyTeamDB) {\n  }\n\n  async ionViewDidLoad() {\n    await this.teamDB.getLoggedInUser().then(data => {\n      this.currentUserUid = data;\n    })\n    this.loadRequests();\n    this.loadUserNotifications();\n  }\n\n  loadRequests() {\n    this.requests = this.db.list('users/' + this.currentUserUid\n      + '/requests')\n  }\n\n  loadUserNotifications() {\n    this.userNotification = this.db.list('users/' + this.currentUserUid + '/notifications/', {\n      query: {\n        orderByChild: 'timestamp'\n      }\n    });\n  }\n\n  doRefresh(refresher) {\n    this.loadRequests();\n    this.loadUserNotifications();\n    setTimeout(() => {\n      refresher.complete();\n    }, 1000);\n  }\n\n  async acceptTeam(teamID, key) {\n    // Add notification to team players\n    let playersList = []\n    await this.teamDB.getTeamPlayers(teamID).then(players => {\n      playersList = players\n      playersList.forEach(player => {\n        if (player.status == 'enrolled') {\n          this.db.list('users/' + player.$key + '/notifications/').push({\n            type: 'playerJoined',\n            team: teamID,\n            player: this.currentUserUid,\n            timestamp: new Date().getTime(),\n            date: moment.utc().format('YYYY-MM-DD HH:mm:ss')\n          })\n        }\n      })\n    })\n\n    // Add player to players list DB\n    this.db.object('/playersList/' + teamID + '/' + this.currentUserUid)\n      .set({ uid: this.currentUserUid, status: 'enrolled' });\n\n    // Add team to user list DB\n    this.db.object('/users/' + this.currentUserUid + '/myTeams/' + teamID)\n      .update({ teamId: teamID });\n\n    // Remove request from user list DB\n    this.db.object('users/' + this.currentUserUid + '/requests/' + key).remove();\n\n    // Add notification to current User\n    this.db.list('users/' + this.currentUserUid + '/notifications/').push({\n      type: 'joinedTeam',\n      team: teamID,\n      timestamp: new Date().getTime(),\n      date: moment.utc().format('YYYY-MM-DD HH:mm:ss')\n    })\n\n  }\n\n  clearNotification(key) {\n    this.db.object('users/' + this.currentUserUid + '/notifications/' + key).remove();\n  }\n\n  clearAll() {\n    this.db.object('users/' + this.currentUserUid + '/notifications/').remove();\n  }\n\n\n  async declineTeam(teamID, key) {\n    await this.teamDB.getTeamInfo(teamID).then(team => {\n      // Notify captain that player declined team invitation\n      this.db.list('users/' + team.captain + '/notifications/').push({\n        type: 'declinedTeamInvite',\n        team: teamID,\n        player: this.currentUserUid,\n        timestamp: new Date().getTime(),\n        date: moment.utc().format('YYYY-MM-DD HH:mm:ss')\n      })\n    })\n    // Remove request from user list DB\n    this.db.object('users/' + this.currentUserUid + '/requests/' + key).remove();\n\n    // Remove player from players list DB\n    this.db.object('/playersList/' + teamID + '/' + this.currentUserUid).remove();\n\n  }\n\n  openTeam(teamID) {\n    this.navCtrl.push('TeamPage', { id: teamID })\n  }\n\n  async openPlayer(playerID) {\n    await this.teamDB.getUserInfo(playerID).then(data => {\n      this.navCtrl.push('PlayerPage', { username: data.username })\n    })\n  }\n\n  openMatchRequest(requestID) {\n    this.navCtrl.push('MatchPage', { id: requestID })\n  }\n\n  openPost(postID) {\n    this.navCtrl.push('PostPage', { id: postID})\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notification/notification.ts","import { ReversePipe } from \"./reverse/reverse\";\nimport { NgModule } from '@angular/core';\n@NgModule({\n\tdeclarations: [\n\t\tReversePipe\n\t],\n\timports: [],\n\texports: [\n\t\tReversePipe\n\t]\n})\nexport class PipesModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/pipes.module.ts","import { Pipe, PipeTransform, IterableDiffers } from '@angular/core';\n\n/**\n * Generated class for the ReversePipe pipe.\n *\n * See https://angular.io/docs/ts/latest/guide/pipes.html for more info on\n * Angular Pipes.\n */\n@Pipe({\n  name: 'reverse',\n  pure: false\n})\nexport class ReversePipe implements PipeTransform {\n\n  differs: any\n  cashed: any\n  constructor(private _differs: IterableDiffers) {\n    this.differs = this._differs.find([]).create(null);\n  }\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  transform(value, ...args) {\n    const changes = this.differs.diff(value)\n    if (changes && value) {\n      this.cashed = value.slice().reverse();;\n    };\n    return this.cashed\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/reverse/reverse.ts"],"sourceRoot":""}