{"version":3,"sources":["../../src/pages/my-team/my-team.module.ts","../../src/pages/my-team/my-team.ts"],"names":[],"mappings":"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","file":"13.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MyTeamPage } from './my-team';\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    MyTeamPage\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(MyTeamPage)\n  ],\n  exports: [\n    MyTeamPage\n  ]\n})\nexport class MyTeamPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-team/my-team.module.ts","import { User } from \"./../../models/user\";\nimport { TabsPage } from \"./../tabs/tabs\";\nimport { Component } from '@angular/core';\nimport {\n  IonicPage, NavController, NavParams, AlertController,\n  ModalController, ActionSheetController\n} from 'ionic-angular';\nimport { StartTeamPage } from '../start-team/start-team';\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { MyTeamDB } from '../../helpers/myTeamDB'\nimport * as moment from 'moment';\n\n/**\n * Generated class for the MyTeamPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage({\n  segment: 'myteam',\n  defaultHistory: ['TabsPage', 'MyTeamPage']\n})\n@Component({\n  selector: 'page-my-team',\n  templateUrl: 'my-team.html',\n})\nexport class MyTeamPage {\n  myTeams: FirebaseListObservable<any[]>\n  myTeamsSub: any\n  currentLength: number = 0\n  hasNoTeams: boolean = false\n  matches: any[] = [];\n  months: any[] = [];\n  blur: boolean = false;\n  currentUID: any;\n\n  constructor(private modal: ModalController,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private db: AngularFireDatabase,\n    private afAuth: AngularFireAuth,\n    private teamDB: MyTeamDB,\n    private actionSheetCtrl: ActionSheetController,\n    private alertCtrl: AlertController) {\n  }\n\n  async ionViewDidLoad() {\n    await this.teamDB.getLoggedInUser().then(uid => {\n      if (uid) this.currentUID = uid;\n    })\n    this.loadTeams();\n    this.loadGames()\n  }\n\n  loadTeams() {\n    this.myTeams = this.db.list('users/' + this.currentUID + '/myTeams');\n  }\n\n  async loadGames() {\n    this.matches = []\n    this.db.list('users/' + this.currentUID + '/myTeams/').take(1)\n      .subscribe(teams => {\n        teams.forEach(team => {\n          this.db.list('teams/' + team.$key + '/upcomingMatches/').take(1).subscribe(matches => {\n            matches.forEach(match => {\n              const matchIndex = this.matches.map(e => { return e.$key }).indexOf(match.$key);\n              if (matchIndex == -1) this.matches.push(match)\n            });\n          })\n        });\n      })\n  }\n\n  doRefresh(refresher) {\n    this.loadGames();\n    this.loadTeams();\n    setTimeout(() => {\n      refresher.complete();\n    }, 1000);\n  }\n\n  startTeam() {\n    const myModal = this.modal.create('StartTeamPage');\n    myModal.present();\n    this.blur = true;\n    myModal.onWillDismiss(data => {\n      this.blur = false;\n    })\n  }\n\n  openMatchRequest(requestID) {\n    this.navCtrl.push('MatchPage', { id: requestID })\n  }\n\n  ionViewWillLeave() {\n    this.teamDB.unsubscribeAll();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-team/my-team.ts"],"sourceRoot":""}