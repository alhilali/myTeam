{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"20.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [HomePage],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(HomePage)\n  ],\n  exports: [\n    HomePage\n  ]\n})\nexport class HomePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component, ViewChild } from '@angular/core';\nimport {\n  IonicPage, NavController, ActionSheetController,\n  ModalController, Slides, Events, Platform\n} from 'ionic-angular';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { MyTeamDB } from '../../helpers/myTeamDB';\nimport { Push, PushObject, PushOptions } from '@ionic-native/push';\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n  @ViewChild(Slides) slides: Slides;\n  currentUserId: any\n  allPosts: any[]\n  matchPosts: any[]\n  playerPosts: any[]\n  blur: boolean = false;\n  type: string = 'all';\n  currentUser: any = {}\n  constructor(private platform: Platform, private modal: ModalController,\n    public teamDB: MyTeamDB, private actionSheetCtrl: ActionSheetController,\n    public navCtrl: NavController, public events: Events, public push: Push) {\n    events.subscribe(\"post:deleted\", (postID) => {\n      this.deletePost(postID)\n    });\n\n    this.initPushNotification();\n  }\n\n  initPushNotification() {\n    if (!this.platform.is('cordova')) {\n      console.warn(\"Push notifications not initialized. Cordova is not available - Run in physical device\");\n      return;\n    }\n    const options: PushOptions = {\n      android: {\n        senderID: '1091890097761'\n      },\n      ios: {\n        alert: 'true',\n        badge: true,\n        sound: 'true',\n        clearBadge: true\n      },\n      windows: {}\n    };\n\n    const pushObject: PushObject = this.push.init(options);\n\n    pushObject.on('registration').subscribe((registration: any) => {\n      console.log('Device registered');\n      this.teamDB.saveToken(registration.registrationId)\n    })\n\n    pushObject.on('notification').subscribe((notification) => {\n      console.log('message', notification.message);\n      let self = this;\n      //if user using app and push notification comes\n      if (notification.additionalData.foreground) {\n        // if application open, show popup\n        console.log(notification);\n      } else {\n        console.log(notification);\n        //if user NOT using app and push notification comes\n        this.navCtrl.push('NotificationPage')\n        console.log(\"Push notification clicked\");\n      }\n    });\n    pushObject.on('error').subscribe(error => console.error('Error with Push plugin', error));\n  }\n\n  ngAfterViewInit() {\n    this.slides.autoHeight = true;\n  }\n\n  async ionViewWillEnter() {\n    await this.teamDB.getLoggedInUser().then(data => {\n      this.currentUserId = data;\n    })\n    await this.teamDB.getUserInfo(this.currentUserId).then(data => {\n      this.currentUser = data;\n    })\n  }\n\n  segmentChanged(event) {\n    if (event.value == 'all') this.slides.slideTo(0, 500);\n    else if (event.value == 'match') this.slides.slideTo(1, 500);\n    else if (event.value == 'player') this.slides.slideTo(2, 500);\n  }\n\n  slideChanged() {\n    let currentIndex = this.slides.getActiveIndex();\n    if (currentIndex == 0) this.type = 'all';\n    if (currentIndex == 1) this.type = 'match';\n    if (currentIndex == 2) this.type = 'player';\n  }\n\n  ionViewWillLoad() {\n    this.loadPosts('all');\n    this.loadPosts('match');\n    this.loadPosts('player');\n  }\n\n  loadPosts(type) {\n    let result;\n    if (type == 'all') {\n      this.teamDB.getAllPosts().then(data => {\n        result = data;\n        this.allPosts = result;\n        this.allPosts.reverse();\n      })\n    } else if (type == 'match') {\n      this.teamDB.getPosts(type).then(data => {\n        result = data;\n        this.matchPosts = result;\n        this.matchPosts.reverse();\n      })\n    } else if (type == 'player') {\n      this.teamDB.getPosts(type).then(data => {\n        result = data;\n        this.playerPosts = result;\n        this.playerPosts.reverse();\n      })\n    }\n  }\n\n  deletePost(postID) {\n    const postIndex = this.allPosts.map(e => { return e.$key }).indexOf(postID);\n    this.allPosts.splice(postIndex, 1)\n    if (this.type == 'match') {\n      const postIndex = this.matchPosts.map(e => { return e.$key }).indexOf(postID);\n      this.matchPosts.splice(postIndex, 1)\n    } else if (this.type == 'player') {\n      const postIndex = this.playerPosts.map(e => { return e.$key }).indexOf(postID);\n      this.playerPosts.splice(postIndex, 1)\n    }\n  }\n\n  doRefresh(refresher) {\n    this.loadPosts(this.type);\n    setTimeout(() => {\n      //console.log('Async operation has ended');\n      refresher.complete();\n    }, 1000);\n  }\n\n  openModal() {\n    this.navCtrl.push('PlayerPage', { username: this.currentUser.originalUsername });\n  }\n\n  compose() {\n    const myModal = this.modal.create('ComposePage', { player: this.currentUser })\n    myModal.present();\n    //this.blur = true;\n    myModal.onWillDismiss(data => {\n      //this.blur = false;\n      if (data.postDone) {\n        this.loadPosts('all');\n        this.loadPosts('match');\n        this.loadPosts('player');\n      }\n    })\n  }\n\n  loginPage() {\n    this.navCtrl.push('WelcomePage')\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}