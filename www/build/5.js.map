{"version":3,"sources":["../../src/pages/tabs/tabs.module.ts","../../src/pages/tabs/tabs.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { TabsPage } from \"./tabs\";\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\n\n@NgModule({\n  declarations: [TabsPage],\n  imports: [\n    IonicPageModule.forChild(TabsPage)\n  ]\n})\nexport class TabsPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.module.ts","import { MyTeamDB } from \"./../../helpers/myTeamDB\";\nimport { Component, ViewChild } from '@angular/core';\nimport { Events, IonicPage, Tabs } from 'ionic-angular';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\n\n@IonicPage({\n  segment: 'mytabs'\n})\n@Component({\n  templateUrl: 'tabs.html'\n})\nexport class TabsPage {\n  @ViewChild('myTabs') tabRef: Tabs;\n  tab1Root = 'HomePage';\n  tab2Root = 'MyTeamPage';\n  tab3Root = 'NotificationPage';\n  tab4Root = 'SearchPage';\n  notificationNum: number;\n  userRequestsNum: number = 0;\n  matchRequestsNum: number = 0;\n\n  constructor(public events: Events, private db: AngularFireDatabase,\n    private afAuth: AngularFireAuth, public teamDB: MyTeamDB) {\n  }\n\n  ngAfterViewInit() {\n    //console.log(this.tabRef);\n  }\n\n  updateBadge() {\n    if ((this.userRequestsNum + this.matchRequestsNum) == 0)\n      this.notificationNum = null;\n    else this.notificationNum = this.userRequestsNum + this.matchRequestsNum;\n  }\n\n  subscribeToBadgeCountChange() {\n    // Method to run when tab count changes\n    return this.events\n      .subscribe(\"tabs-page:badge-update\", (type) => {\n        if (type == 'match') this.checkMatchRequests();\n        else if (type == 'user') this.checkUserRequests();\n      });\n  }\n\n  checkUserRequests() {\n    this.db.list('users/' + this.afAuth.auth.currentUser.uid\n      + '/requests').take(1).subscribe(data => {\n        this.userRequestsNum = data.length;\n        this.updateBadge();\n      })\n  }\n\n  checkMatchRequests() {\n    this.db.list('matches/', {\n      query: {\n        orderByChild: 'toUID',\n        equalTo: this.afAuth.auth.currentUser.uid\n      }\n    }).take(1).subscribe(data => {\n      let count = 0;\n      for (let i = 0; i < data.length; i++) {\n        if (data[i].status == 'pending') count++;\n        if (i == data.length - 1) {\n          this.matchRequestsNum = count;\n          this.updateBadge();\n        }\n      }\n    })\n  }\n\n  ionViewWillEnter() {\n    this.afAuth.auth.onAuthStateChanged(user => {\n      if (!user) {\n        this.tabRef._tabs[1].show = false;\n        this.tabRef._tabs[2].show = false;\n      } else {\n        this.tabRef._tabs[1].show = true;\n        this.tabRef._tabs[2].show = true;\n      }\n    })\n    // this.checkUserRequests();\n    // this.checkMatchRequests();\n    // this.subscribeToBadgeCountChange();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/tabs/tabs.ts"],"sourceRoot":""}