{"version":3,"sources":["../../src/pages/player/player.module.ts","../../src/pages/player/player.ts"],"names":[],"mappings":"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","file":"11.main.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PlayerPage } from './player';\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    PlayerPage\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(PlayerPage),\n  ],\n  exports: [\n    PlayerPage\n  ]\n})\nexport class PlayerPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/player/player.module.ts","import { Component, ViewChildren, QueryList } from '@angular/core';\nimport {\n  IonicPage, NavController, ActionSheetController,\n  NavParams, ModalController, Slides, Content\n} from 'ionic-angular';\nimport { User } from '../../models/user';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\n\n/**\n * Generated class for the PlayerPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage()\n@Component({\n  selector: 'page-player',\n  templateUrl: 'player.html',\n})\nexport class PlayerPage {\n  player = {} as User\n  prmPlayer: any = {}\n  playerID: string = ''\n  playerSub: any\n  currentUser: boolean = false\n  myTeams: any[] = []\n  section: string = '0';\n  @ViewChildren(Slides) slides: QueryList<Slides>;\n  bottomSlides: Slides\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private afAuth: AngularFireAuth,\n    private db: AngularFireDatabase,\n    private modlCtrl: ModalController,\n    private actionSheetCtrl: ActionSheetController) {\n    this.prmPlayer = navParams.get('player');\n    if (!this.prmPlayer) this.playerID = navParams.get('playerID');\n    else this.playerID = this.prmPlayer.$key;\n    this.player.bg = '';\n  }\n\n  ionViewWillLoad() {\n    if (this.playerID == this.afAuth.auth.currentUser.uid) this.currentUser = true;\n    this.loadPlayer();\n  }\n\n  ngAfterViewInit() {\n    this.bottomSlides = this.slides.toArray()[1];\n    this.bottomSlides.lockSwipes(true);\n  }\n\n  ionViewDidLoad() {\n    this.loadPlayer();\n    this.loadMyTeams();\n  }\n\n  loadPlayer() {\n    if (this.playerSub) this.playerSub.unsubscribe();\n    this.playerSub = this.db.object('users/' + this.playerID)\n      .subscribe(data => {\n        this.player = data;\n        if (!this.player.bg) this.player.bg = 'http://www.publicdomainpictures.net/pictures/50000/nahled/sunset-profile-background.jpg';\n      })\n  }\n\n  loadMyTeams() {\n    this.db.list('users/' + this.playerID\n      + '/myTeams').take(1).subscribe(data => {\n        this.myTeams = []\n        let i;\n        for (i = 0; i < data.length; i++) {\n          this.db.object('teams/' + data[i].teamId).take(1).subscribe(team => {\n            this.myTeams.push(team)\n          })\n        }\n      })\n  }\n\n  segmentChanged(event) {\n    this.bottomSlides.lockSwipes(false);\n    this.bottomSlides.slideTo(event.value, 500);\n    this.bottomSlides.lockSwipes(true);\n  }\n\n  slideChanged() {\n    let currentIndex = this.bottomSlides.getActiveIndex();\n    this.section = currentIndex + '';\n  }\n\n  addPlayer() {\n    let modal = this.modlCtrl.create('AddPlayerToTeamPage', { player: this.player });\n    modal.present();\n  }\n\n  options() {\n    let actionSheet;\n    let btns;\n    if (!this.currentUser) {\n      btns = [\n        {\n          text: 'إضافة اللاعب',\n          handler: () => {\n            this.addPlayer();\n          }\n        },\n        {\n          text: 'Block',\n          role: 'destructive',\n          handler: () => {\n            this.db.object('users/' + this.afAuth.auth.currentUser.uid +\n              '/blocked/' + this.playerID)\n              .set({ status: 'blocked' })\n            this.navCtrl.pop();\n          }\n        },\n        {\n          text: 'إلغاء',\n          role: 'cancel',\n          handler: () => {\n          }\n        }\n      ]\n    } else {\n      btns = [\n        {\n          text: 'إلغاء',\n          role: 'cancel',\n          handler: () => {\n          }\n        }\n      ]\n    }\n    actionSheet = this.actionSheetCtrl.create({\n      buttons: btns\n    })\n    actionSheet.present()\n  }\n\n  ionViewWillLeave() {\n    this.playerSub.unsubscribe();\n  }\n\n  openModal() {\n    this.playerSub.unsubscribe();\n    let modal = this.modlCtrl.create('EditProfilePage', { player: this.player });\n    modal.present();\n  }\n\n  openTeam(team) {\n    this.navCtrl.push('TeamPage', { team: team })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/player/player.ts"],"sourceRoot":""}