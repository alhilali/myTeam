{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"17.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [HomePage],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(HomePage)\n  ],\n  exports: [\n    HomePage\n  ]\n})\nexport class HomePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component, ViewChild } from '@angular/core';\nimport {\n  IonicPage, NavController, ActionSheetController,\n  ModalController, Slides, Events\n} from 'ionic-angular';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { MyTeamDB } from '../../helpers/myTeamDB';\n\n@IonicPage()\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\nexport class HomePage {\n  @ViewChild(Slides) slides: Slides;\n  currentUserId: any\n  allPosts: any[]\n  matchPosts: any[]\n  playerPosts: any[]\n  blur: boolean = false;\n  type: string = 'all';\n  currentUser: any = {}\n  constructor(private afAuth: AngularFireAuth, private modal: ModalController,\n    public teamDB: MyTeamDB, private actionSheetCtrl: ActionSheetController,\n    public navCtrl: NavController, public events: Events) {\n    events.subscribe(\"post:deleted\", (postID) => {\n      this.deletePost(postID)\n    });\n  }\n\n  ngAfterViewInit() {\n    this.slides.autoHeight = true;\n  }\n\n  async ionViewWillEnter() {\n    await this.teamDB.getLoggedInUser().then(data => {\n      this.currentUserId = data;\n    })\n    await this.teamDB.getUserInfo(this.currentUserId).then(data => {\n      this.currentUser = data;\n    })\n  }\n\n  segmentChanged(event) {\n    if (event.value == 'all') this.slides.slideTo(0, 500);\n    else if (event.value == 'match') this.slides.slideTo(1, 500);\n    else if (event.value == 'player') this.slides.slideTo(2, 500);\n  }\n\n  slideChanged() {\n    let currentIndex = this.slides.getActiveIndex();\n    if (currentIndex == 0) this.type = 'all';\n    if (currentIndex == 1) this.type = 'match';\n    if (currentIndex == 2) this.type = 'player';\n  }\n\n  ionViewWillLoad() {\n    this.loadPosts('all');\n    this.loadPosts('match');\n    this.loadPosts('player');\n  }\n\n  loadPosts(type) {\n    let result;\n    if (type == 'all') {\n      this.teamDB.getAllPosts().then(data => {\n        result = data;\n        this.allPosts = result;\n        this.allPosts.reverse();\n      })\n    } else if (type == 'match') {\n      this.teamDB.getPosts(type).then(data => {\n        result = data;\n        this.matchPosts = result;\n        this.matchPosts.reverse();\n      })\n    } else if (type == 'player') {\n      this.teamDB.getPosts(type).then(data => {\n        result = data;\n        this.playerPosts = result;\n        this.playerPosts.reverse();\n      })\n    }\n  }\n\n  deletePost(postID) {\n    const postIndex = this.allPosts.map(e => { return e.$key }).indexOf(postID);\n    this.allPosts.splice(postIndex, 1)\n    if (this.type == 'match') {\n      const postIndex = this.matchPosts.map(e => { return e.$key }).indexOf(postID);\n      this.matchPosts.splice(postIndex, 1)\n    } else if (this.type == 'player') {\n      const postIndex = this.playerPosts.map(e => { return e.$key }).indexOf(postID);\n      this.playerPosts.splice(postIndex, 1)\n    }\n  }\n\n  doRefresh(refresher) {\n    this.loadPosts(this.type);\n    setTimeout(() => {\n      //console.log('Async operation has ended');\n      refresher.complete();\n    }, 1000);\n  }\n\n  async openModal() {\n    this.navCtrl.push('PlayerPage', { username: this.currentUser.originalUsername });\n  }\n\n  async compose() {\n    const myModal = this.modal.create('ComposePage', { player: this.currentUser })\n    myModal.present();\n    //this.blur = true;\n    myModal.onWillDismiss(data => {\n      //this.blur = false;\n      if (data.postDone) {\n        this.loadPosts('all');\n        this.loadPosts('match');\n        this.loadPosts('player');\n      }\n    })\n  }\n\n  loginPage() {\n    this.navCtrl.push('WelcomePage')\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}