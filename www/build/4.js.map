{"version":3,"sources":["../../src/pages/team/team.module.ts","../../src/pages/team/team.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { TeamPage } from './team';\nimport { ShrinkingSegmentHeader } from '../../components/shrinking-segment-header/shrinking-segment-header';\nimport { ProfilePicComponent } from '../../components/profile-pic/profile-pic';\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    TeamPage,\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(TeamPage),\n  ],\n  exports: [\n    TeamPage\n  ]\n})\nexport class TeamPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/team/team.module.ts","import { Component, ViewChildren, QueryList } from '@angular/core';\nimport {\n  IonicPage, NavController, Slides,\n  NavParams, ModalController, AlertController\n} from 'ionic-angular';\nimport { Team } from '../../models/team';\nimport { AngularFireDatabase, FirebaseListObservable } from 'angularfire2/database';\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { MyTeamDB } from '../../helpers/myTeamDB';\nimport * as moment from 'moment';\n\n/**\n * Generated class for the TeamPage page.\n *\n * See http://ionicframework.com/docs/components/#navigation for more info\n * on Ionic pages and navigation.\n */\n@IonicPage({\n  segment: 'team/:id',\n  defaultHistory: ['MyTeamPage']\n})\n@Component({\n  selector: 'page-team',\n  templateUrl: 'team.html',\n})\nexport class TeamPage {\n  team = {} as Team;\n  isCaptain = false;\n  playersList: any[] = []\n  playersListSub: any\n  teamSub: any\n  section: string = '0'\n  matches: FirebaseListObservable<any[]>;\n  months: any[] = [];\n  @ViewChildren(Slides) slides: QueryList<Slides>;\n  bottomSlides: Slides\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    private db: AngularFireDatabase,\n    private afAuth: AngularFireAuth,\n    private modal: ModalController,\n    private teamDB: MyTeamDB,\n    private alertCtrl: AlertController) {\n    this.team.logo = '';\n    this.team.bg = '';\n    this.team.$key = this.navParams.get('id');\n  }\n\n  ngAfterViewInit() {\n    this.bottomSlides = this.slides.toArray()[1];\n    this.bottomSlides.lockSwipes(true);\n  }\n\n  ionViewDidEnter() {\n    this.loadTeam();\n    this.loadPlayers();\n  }\n\n  loadTeam() {\n    this.teamSub = this.db.object('teams/' + this.team.$key).subscribe(data => {\n      this.team = data;\n      if (this.teamDB.loggedIn && this.team.captain == this.teamDB.userInfo.uid) this.isCaptain = true;\n      if (!this.team.bg) this.team.bg = 'http://2.bp.blogspot.com/-IxU2acVSDds/UPPNBOwulyI/AAAAAAAACGU/3RaskOb8upk/s1600/Old+Trafford+wallpapers+12.jpg';\n    })\n  }\n\n  loadPlayers() {\n    this.playersListSub = this.db.list('playersList/' + this.team.$key)\n      .subscribe(data => {\n        this.playersList = []\n        let i;\n        for (i = 0; i < data.length; i++) {\n          if (data[i].status != 'pending') {\n            this.db.object('users/' + data[i].uid).take(1).subscribe(user => {\n              this.playersList.push(user);\n            })\n          }\n        }\n      })\n  }\n\n  segmentChanged(event) {\n    if (event.value == '2') this.loadGames();\n    this.bottomSlides.lockSwipes(false);\n    this.bottomSlides.slideTo(event.value, 500);\n    this.bottomSlides.lockSwipes(true);\n  }\n\n  slideChanged() {\n    let currentIndex = this.bottomSlides.getActiveIndex();\n    this.section = currentIndex + '';\n    if (currentIndex == 2) this.loadGames();\n  }\n\n  loadGames() {\n    this.matches = this.db.list('/teams/' + this.team.$key + '/upcomingMatches/')\n    this.setUpMonths();\n  }\n\n  setUpMonths() {\n    this.matches.take(1).subscribe(data => {\n      data.forEach(match => {\n        this.db.object('matches/' + match.$key).take(1).subscribe(matchInfo => {\n          const monthNum = matchInfo.date.substring(0, 2);\n          const monthName = moment(monthNum, 'MM').format('MMMM');\n          const index = this.months.map(e => { return e.num }).indexOf(monthNum);\n          if (index == -1) this.months.push({ name: monthName, num: monthNum })\n        })\n      });\n    })\n  }\n\n  openMatchRequest(request) {\n    this.navCtrl.push('MatchPage', { request: request })\n  }\n\n  removePlayer(player) {\n    if (player.$key == this.team.captain) {\n      this.alertCtrl.create({\n        title: 'خطأ في حذف لاعب',\n        subTitle: 'لا يمكنك حذف كابتن الفريق',\n        buttons: ['حسناً'],\n      }).present();\n    } else this.showConfirm(player)\n  }\n\n  showConfirm(player) {\n    let confirm = this.alertCtrl.create({\n      title: 'هل انت متأكد من حذف اللاعب؟',\n      message: 'لا يمكن التراجع بعد تنفيذ العملية',\n      buttons: [\n        {\n          text: 'إلغاء',\n          handler: () => {\n            //console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'متأكد',\n          handler: () => {\n            this.db.object('users/' + player.$key + '/myTeams/' + this.team.$key).remove();\n            this.db.object('playersList/' + this.team.$key + '/' + player.$key).remove();\n          }\n        }\n      ]\n    });\n    confirm.present();\n  }\n\n  ionViewWillLeave() {\n    this.playersListSub.unsubscribe();\n    this.teamSub.unsubscribe();\n    this.teamDB.unsubscribeAll();\n  }\n\n  showPlayer(player) {\n    this.navCtrl.push('PlayerPage', { username: player.originalUsername })\n  }\n\n  addPlayer() {\n    const myModal = this.modal.create('AddPlayerPage', { team: this.team });\n    myModal.present();\n  }\n\n  requestMatch() {\n    const myModal = this.modal.create('RequestMatchPage', { team: this.team });\n    myModal.present();\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/team/team.ts"],"sourceRoot":""}